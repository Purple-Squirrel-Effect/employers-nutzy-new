---
// Compact footer component with essential information
// Follows the existing design system patterns with minimal spacing

import {
  companyInfo,
  footerNavigationSections,
  socialLinks,
} from "../config/navigation";

// Get current year for copyright
const currentYear = new Date().getFullYear();
---

<footer
  class="bg-white border-t border-gray-200"
  role="contentinfo"
  aria-label="Site footer"
>
  <div class="px-8 md:px-16 lg:px-32 py-8 mx-auto">
    <!-- Main Footer Content -->
    <div class="flex flex-col lg:flex-row justify-between gap-8 mb-6">
      <!-- Company Info Section -->
      <div class="flex-shrink-0 space-y-4">
        <!-- Logo -->
        <div class="flex items-center gap-3">
          <a
            href="/"
            class="flex items-center gap-3 group mr-4 z-50 relative"
            aria-label="Nutzy Home"
          >
            <svg
              class="h-10 md:h-12"
              viewBox="0 0 1123 467"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M118.254 5.79363C119.081 1.9619 114.034 -0.686125 110.585 1.75849C78.8248 24.2918 -9.2276 96.6549 1.06379 199.325C5.8968 247.518 30.5136 283.589 47.8802 304.021C50.1803 306.728 54.9756 306.045 56.2049 302.843C67.2777 273.972 77.6534 240.108 84.7563 201.797C88.5059 181.558 90.9193 162.364 92.3651 144.43C92.701 140.241 99.0138 139.033 101.295 142.719L115.001 164.857C116.063 166.572 118.311 167.414 120.445 166.892C131.904 164.096 147.253 161.477 165.452 161.391C185.485 161.299 202.222 164.308 214.338 167.409C216.511 167.964 218.817 167.109 219.878 165.347L233.397 142.897C235.584 139.266 241.754 140.273 242.334 144.354C247.001 177.151 253.733 212.722 263.347 250.483C272.378 285.954 282.764 318.672 293.634 348.45C294.883 351.875 300.098 352.428 302.237 349.364C316.551 328.844 342.31 283.503 331.821 228.504C321.218 172.89 279.223 137.128 266.332 126.962C205.181 78.7387 141.06 87.7452 121.461 44.6771C115.284 31.1049 115.773 17.2876 118.254 5.79363Z"
                fill="#581c87"></path>
              <path
                d="M105.498 358.251C104.59 356.889 96.1274 343.709 102.126 330.457C102.811 328.942 105.758 322.848 112.689 318.86C121.293 313.906 130.452 315.415 148.417 318.639C154.814 319.787 161.995 321.394 169.765 323.674C169.667 320.537 169.649 316.257 169.992 311.201C170.884 297.937 171.329 291.305 175.158 288.658C177.644 286.943 186.062 289.534 202.798 294.787C213.849 298.255 219.401 300.06 220.77 303.423C222.334 307.264 220.188 311.473 215.833 319.735C212.058 326.893 208.069 332.39 205.046 336.146C222.911 341.06 234.624 348.826 241.298 354.125C250.049 361.073 252.037 365.292 252.909 368.099C255.687 377.028 252.426 388.566 245.495 394.796C227.228 411.22 188.208 386.527 179.877 398.518C175.192 405.26 183.68 418.631 187.968 423.901C196.273 434.113 207.407 436.803 210.663 437.471C202.881 444.685 195.498 449.531 190.013 452.674C190.013 452.674 176.05 460.674 147.519 465.92C145.762 466.241 142.315 466.823 138.53 465.48C134.946 464.212 132.749 461.82 131.565 460.449C127.058 455.241 117.889 442.562 106.621 425.215C109.037 425.261 136.191 425.538 139.429 414.711C139.777 413.545 139.758 412.559 139.728 412.102C139.237 404.393 127.107 401.57 114.035 392.609C110.337 390.075 105.168 386.09 99.6543 380.135C101.601 372.84 103.549 365.545 105.498 358.251Z"
                fill="#25b4b3"></path>
              <path
                d="M128.118 231.397C128.118 238.689 124.73 244.599 120.552 244.599C116.374 244.599 112.988 238.689 112.988 231.397C112.988 224.105 116.374 218.194 120.552 218.194C124.73 218.194 128.118 224.105 128.118 231.397Z"
                fill="#581c87"></path>
              <path
                d="M221.973 230.521C221.973 237.813 218.587 243.723 214.407 243.723C210.231 243.723 206.844 237.813 206.844 230.521C206.844 223.229 210.231 217.318 214.407 217.318C218.587 217.318 221.973 223.229 221.973 230.521Z"
                fill="#581c87"></path>
              <path
                d="M187.176 254.551C187.176 248.573 178.254 243.724 167.252 243.724C156.247 243.724 147.326 248.573 147.326 254.551C147.326 260.166 155.188 264.781 165.257 265.323V273.763C165.257 274.976 166.274 275.967 167.52 275.967C168.763 275.967 169.783 274.976 169.783 273.763V265.283C179.589 264.605 187.176 260.065 187.176 254.551Z"
                fill="#581c87"></path>
              <path
                d="M545.699 242.829L546.107 155.343H578.365L578.161 239.846C577.957 263.708 588.371 274.842 606.949 274.842C625.529 274.842 635.533 263.708 635.533 239.846L635.737 155.343H668.201L667.997 242.829C667.997 283.788 643.088 305.263 607.153 305.263C571.017 305.263 545.699 283.788 545.699 242.829Z"
                fill="#581c87"></path>
              <path
                d="M731.291 183.776H689.232V155.344H805.812V183.776H763.753V302.281H731.291V183.776Z"
                fill="#581c87"></path>
              <path
                d="M927.705 159.718L869.719 273.849H927.295V302.281H821.129V297.905L879.316 183.777H819.494L826.641 155.344H927.705V159.718Z"
                fill="#581c87"></path>
              <path
                d="M1077.97 155.344L1022.03 247.204V302.281H989.772V248.398L933.627 155.344H972.623L1006.31 216.383L1040 155.344H1077.97Z"
                fill="#581c87"></path>
              <path
                d="M1082.53 279.312C1082.38 278.877 1081 274.689 1083.59 271.46C1083.89 271.094 1085.13 269.62 1087.32 268.995C1090.03 268.219 1092.43 269.253 1097.13 271.357C1098.8 272.103 1100.66 273.03 1102.63 274.182C1102.82 273.314 1103.12 272.139 1103.58 270.775C1104.77 267.199 1105.37 265.409 1106.61 264.945C1107.41 264.643 1109.53 265.924 1113.75 268.497C1116.53 270.197 1117.92 271.067 1118.06 272.08C1118.22 273.24 1117.32 274.25 1115.54 276.221C1113.99 277.929 1112.51 279.164 1111.41 279.99C1115.96 282.548 1118.62 285.47 1120.07 287.375C1121.47 289.216 1122.11 290.503 1122.25 291.995C1122.3 292.454 1122.66 296.151 1120 297.726C1118.2 298.789 1116.16 298.212 1115.68 298.066C1115.08 299.059 1114.37 300.101 1113.53 301.156C1110.95 304.42 1108.08 306.658 1105.72 308.156C1104.64 308.746 1103.4 309.348 1101.99 309.901C1100.86 310.351 1099.83 310.682 1098.97 310.926C1098.97 310.926 1094.57 312.174 1086.37 311.682C1085.86 311.653 1084.88 311.576 1083.94 310.954C1083.04 310.363 1082.61 309.559 1082.38 309.102C1081.52 307.368 1079.91 303.269 1078.06 297.75C1077.72 296.276 1077.39 294.142 1077.6 291.581C1077.85 288.673 1078.69 286.384 1079.37 284.917C1080.42 283.048 1081.48 281.181 1082.53 279.312Z"
                fill="#25b4b3"></path>
              <path
                d="M516.3 155.344V304.665H511.808L428.508 221.753V302.279H396.045V152.759H400.741L483.633 235.473V155.344H516.3Z"
                fill="#581c87"></path>
            </svg>
          </a>
        </div>

        <!-- Contact Information -->
        <div class="space-y-2 text-sm">
          <div class="flex items-center gap-2">
            <a
              href={`mailto:${companyInfo.email}`}
              class="text-gray-700 hover:text-primary-900 transition-colors duration-200"
            >
              {companyInfo.email}
            </a>
          </div>
          <div class="flex items-center gap-2">
            <a
              href={`tel:${companyInfo.phone.replace(/\s/g, "")}`}
              class="text-gray-700 hover:text-primary-900 transition-colors duration-200"
            >
              {companyInfo.phone}
            </a>
          </div>
          <div class="text-gray-700">{companyInfo.address}</div>
        </div>

        <!-- Social Media Links -->
        <div class="flex gap-3">
          {
            socialLinks.map((social) => (
              <a
                href={social.href}
                target="_blank"
                rel="noopener noreferrer"
                class="w-8 h-8 bg-gray-100 hover:bg-primary-300 rounded-lg flex items-center justify-center transition-all duration-300 group "
                aria-label={social.ariaLabel}
              >
                {social.icon === "linkedin" && (
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><!--!Font Awesome Free v7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M512 96L127.9 96C110.3 96 96 110.5 96 128.3L96 511.7C96 529.5 110.3 544 127.9 544L512 544C529.6 544 544 529.5 544 511.7L544 128.3C544 110.5 529.6 96 512 96zM231.4 480L165 480L165 266.2L231.5 266.2L231.5 480L231.4 480zM198.2 160C219.5 160 236.7 177.2 236.7 198.5C236.7 219.8 219.5 237 198.2 237C176.9 237 159.7 219.8 159.7 198.5C159.7 177.2 176.9 160 198.2 160zM480.3 480L413.9 480L413.9 376C413.9 351.2 413.4 319.3 379.4 319.3C344.8 319.3 339.5 346.3 339.5 374.2L339.5 480L273.1 480L273.1 266.2L336.8 266.2L336.8 295.4L337.7 295.4C346.6 278.6 368.3 260.9 400.6 260.9C467.8 260.9 480.3 305.2 480.3 362.8L480.3 480z"/></svg>                )}
                {social.icon === "instagram" && (
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><!--!Font Awesome Free v7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M320.3 205C256.8 204.8 205.2 256.2 205 319.7C204.8 383.2 256.2 434.8 319.7 435C383.2 435.2 434.8 383.8 435 320.3C435.2 256.8 383.8 205.2 320.3 205zM319.7 245.4C360.9 245.2 394.4 278.5 394.6 319.7C394.8 360.9 361.5 394.4 320.3 394.6C279.1 394.8 245.6 361.5 245.4 320.3C245.2 279.1 278.5 245.6 319.7 245.4zM413.1 200.3C413.1 185.5 425.1 173.5 439.9 173.5C454.7 173.5 466.7 185.5 466.7 200.3C466.7 215.1 454.7 227.1 439.9 227.1C425.1 227.1 413.1 215.1 413.1 200.3zM542.8 227.5C541.1 191.6 532.9 159.8 506.6 133.6C480.4 107.4 448.6 99.2 412.7 97.4C375.7 95.3 264.8 95.3 227.8 97.4C192 99.1 160.2 107.3 133.9 133.5C107.6 159.7 99.5 191.5 97.7 227.4C95.6 264.4 95.6 375.3 97.7 412.3C99.4 448.2 107.6 480 133.9 506.2C160.2 532.4 191.9 540.6 227.8 542.4C264.8 544.5 375.7 544.5 412.7 542.4C448.6 540.7 480.4 532.5 506.6 506.2C532.8 480 541 448.2 542.8 412.3C544.9 375.3 544.9 264.5 542.8 227.5zM495 452C487.2 471.6 472.1 486.7 452.4 494.6C422.9 506.3 352.9 503.6 320.3 503.6C287.7 503.6 217.6 506.2 188.2 494.6C168.6 486.8 153.5 471.7 145.6 452C133.9 422.5 136.6 352.5 136.6 319.9C136.6 287.3 134 217.2 145.6 187.8C153.4 168.2 168.5 153.1 188.2 145.2C217.7 133.5 287.7 136.2 320.3 136.2C352.9 136.2 423 133.6 452.4 145.2C472 153 487.1 168.1 495 187.8C506.7 217.3 504 287.3 504 319.9C504 352.5 506.7 422.6 495 452z"/></svg>
                )}
                {social.icon === "tiktok" && (
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><!--!Font Awesome Free v7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M544.5 273.9C500.5 274 457.5 260.3 421.7 234.7L421.7 413.4C421.7 446.5 411.6 478.8 392.7 506C373.8 533.2 347.1 554 316.1 565.6C285.1 577.2 251.3 579.1 219.2 570.9C187.1 562.7 158.3 545 136.5 520.1C114.7 495.2 101.2 464.1 97.5 431.2C93.8 398.3 100.4 365.1 116.1 336C131.8 306.9 156.1 283.3 185.7 268.3C215.3 253.3 248.6 247.8 281.4 252.3L281.4 342.2C266.4 337.5 250.3 337.6 235.4 342.6C220.5 347.6 207.5 357.2 198.4 369.9C189.3 382.6 184.4 398 184.5 413.8C184.6 429.6 189.7 444.8 199 457.5C208.3 470.2 221.4 479.6 236.4 484.4C251.4 489.2 267.5 489.2 282.4 484.3C297.3 479.4 310.4 469.9 319.6 457.2C328.8 444.5 333.8 429.1 333.8 413.4L333.8 64L421.8 64C421.7 71.4 422.4 78.9 423.7 86.2C426.8 102.5 433.1 118.1 442.4 131.9C451.7 145.7 463.7 157.5 477.6 166.5C497.5 179.6 520.8 186.6 544.6 186.6L544.6 274z"/></svg>
                )}
                
              </a>
            ))
          }
        </div>
      </div>

      <!-- Navigation Sections - Compact Grid -->
      <div>
        <div
          class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-6 text-sm"
        >
          {
            footerNavigationSections.map((section) => (
              <nav
                class="space-y-2"
                aria-labelledby={`footer-${section.title.toLowerCase().replace(/\s+/g, "-")}-heading`}
              >
                <h3
                  id={`footer-${section.title.toLowerCase().replace(/\s+/g, "-")}-heading`}
                  class="font-semibold text-gray-900"
                >
                  {section.title}
                </h3>
                <ul class="space-y-1">
                  {section.links.map((link) => (
                    <li>
                      <a
                        href={link.href}
                        class="text-gray-700 hover:text-primary-900 transition-colors duration-200 block"
                        target={link.external ? "_blank" : undefined}
                        rel={link.external ? "noopener noreferrer" : undefined}
                      >
                        {link.label}
                      </a>
                    </li>
                  ))}
                </ul>
              </nav>
            ))
          }
        </div>
        <!-- Newsletter Subscription Section -->
        <div class="mt-8 pt-6 border-t border-gray-200">
          <div class="lg:max-w-xl lg:flex gap-4">
            <div class="flex flex-col items-start gap-2">
              <div class="flex gap-2">
                <svg
                  class="w-5 h-5 text-primary-600"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                  aria-hidden="true"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
                  ></path>
                </svg>
                <h3 class="font-semibold text-gray-900 text-sm">
                  Blijf op de hoogte
                </h3>
              </div>
              <p class="text-sm text-gray-600 mb-4 leading-relaxed">
                Ontvang maandelijks de nieuwste inzichten over Gen-Z recruitment
                en platform updates.
              </p>
            </div>
            <div class="flex flex-col lg:w-96">
              <form
                class="space-y-3"
                action="https://employers-backend.nutzy.nl/api/collections/newsletter_subscriptions/records"
                method="POST"
                id="newsletter-form"
              >
                <div class="relative">
                  <input
                    type="email"
                    name="email"
                    placeholder="Jouw e-mailadres"
                    required
                    class="w-full px-4 py-3 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none transition-all duration-200 bg-white shadow-sm"
                    aria-label="E-mailadres voor nieuwsbrief"
                  />
                </div>
                <button
                  type="submit"
                  class="w-full hover:brightness-105 hover:cursor-pointer px-4 py-3 text-sm bg-tertiary-500 text-black rounded-lg transition-all duration-200 font-medium shadow-sm hover:shadow-md"
                >
                  Aanmelden voor nieuwsbrief
                </button>
              </form>
              <p class="text-xs text-gray-500 mt-3 leading-relaxed">
                Je kunt je op elk moment uitschrijven. Bekijk ons
                <a
                  href="/privacy"
                  class="text-primary-600 hover:text-primary-700 underline decoration-1 underline-offset-2 transition-colors duration-200"
                >
                  privacybeleid
                </a>.
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Footer Bottom - Compact -->
    <div class="pt-4 border-t border-gray-200">
      <div
        class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4 text-xs text-gray-600"
      >
        <!-- Copyright and Legal -->
        <div class="flex flex-col sm:flex-row gap-2 sm:gap-4">
          <p>© {currentYear} {companyInfo.name}. Alle rechten voorbehouden.</p>
          <div class="flex gap-3 flex-wrap">
            <a
              href="/privacy"
              class="hover:text-primary-900 transition-colors duration-200"
            >
              Privacy
            </a>
            <a
              href="/terms"
              class="hover:text-primary-900 transition-colors duration-200"
            >
              Voorwaarden
            </a>
            <a
              href="/cookies"
              class="hover:text-primary-900 transition-colors duration-200"
            >
              Cookies
            </a>
          </div>
        </div>

        <!-- Company Registration -->
        <div class="flex gap-4 text-xs text-gray-600">
          <span>KvK: {companyInfo.kvk}</span>
          <!-- <span>BTW: {companyInfo.btw}</span> -->
        </div>
      </div>
    </div>
  </div>
</footer>

<style>
  /* Ensure footer doesn't interfere with existing animations */
  footer {
    position: relative;
    z-index: 10;
  }

  /* Enhanced focus states for accessibility */
  footer a:focus {
    outline: 2px solid var(--color-primary-900);
    outline-offset: 2px;
    border-radius: 4px;
  }

  /* Smooth transitions for all interactive elements */
  footer a,
  footer button {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Newsletter form styles */
  .newsletter-success {
    background-color: #10b981;
    color: white;
  }

  .newsletter-error {
    background-color: #ef4444;
    color: white;
  }
</style>

<script>
  // Newsletter subscription form handling
  document.addEventListener("DOMContentLoaded", function () {
    const form = document.getElementById("newsletter-form") as HTMLFormElement;
    const submitButton = form?.querySelector(
      'button[type="submit"]'
    ) as HTMLButtonElement;
    const emailInput = form?.querySelector(
      'input[name="email"]'
    ) as HTMLInputElement;

    if (!form || !submitButton || !emailInput) return;

    form.addEventListener("submit", async function (e) {
      e.preventDefault();

      const email = emailInput.value.trim();
      if (!email) return;

      // Update button state
      const originalText = submitButton.textContent;
      submitButton.textContent = "Bezig...";
      submitButton.disabled = true;

      try {
        const response = await fetch(form.action, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({
            email: email,
            subscribed_at: new Date().toISOString(),
            source: "footer_form",
          }),
        });

        if (response.ok) {
          // Success
          submitButton.textContent = "✓ Aangemeld!";
          submitButton.classList.remove(
            "bg-primary-900",
            "hover:bg-primary-800"
          );
          submitButton.classList.add("newsletter-success");
          emailInput.value = "";

          // Reset after 3 seconds
          setTimeout(() => {
            submitButton.textContent = originalText;
            submitButton.classList.remove("newsletter-success");
            submitButton.classList.add(
              "bg-primary-900",
              "hover:bg-primary-800"
            );
            submitButton.disabled = false;
          }, 3000);
        } else {
          throw new Error("Subscription failed");
        }
      } catch (error) {
        // Error
        submitButton.textContent = "Fout opgetreden";
        submitButton.classList.remove("bg-primary-900", "hover:bg-primary-800");
        submitButton.classList.add("newsletter-error");

        // Reset after 3 seconds
        setTimeout(() => {
          submitButton.textContent = originalText;
          submitButton.classList.remove("newsletter-error");
          submitButton.classList.add("bg-primary-900", "hover:bg-primary-800");
          submitButton.disabled = false;
        }, 3000);
      }
    });
  });
</script>
