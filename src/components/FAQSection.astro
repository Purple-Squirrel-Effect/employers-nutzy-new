---
export interface Props {
  className?: string;
}

const { className = "" } = Astro.props;
---

<section id="faq" class={`faq-section ${className}`} data-faq-section>
  <div
    class="min-h-screen bg-gradient-to-br from-purple-50 to-pink-50 py-20 px-4 sm:px-6 lg:px-8"
  >
    <div class="max-w-4xl mx-auto">
      <!-- Section Header -->
      <div class="text-center mb-16" data-faq-header>
        <span
          class="inline-block px-4 py-2 bg-purple-100 text-purple-700 rounded-full text-sm font-semibold mb-6"
        >
          ❓ Veelgestelde Vragen
        </span>
        <h2
          class="text-5xl lg:text-6xl font-bold text-purple-900 mb-6 split-faq"
        >
          Heb je nog <br />
          <span
            class="text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600"
          >
            vragen?
          </span>
        </h2>
        <p class="text-xl text-purple-700 max-w-2xl mx-auto leading-relaxed">
          Hier vind je antwoorden op de meest gestelde vragen over onze services
          en platform.
        </p>
      </div>

      <!-- FAQ Categories -->
      <div class="mb-12" data-faq-categories>
        <div class="flex flex-wrap justify-center gap-4">
          <button
            class="faq-category-btn active px-6 py-3 rounded-xl font-semibold transition-all duration-300"
            data-category="algemeen"
          >
            Algemeen
          </button>
          <button
            class="faq-category-btn px-6 py-3 rounded-xl font-semibold transition-all duration-300"
            data-category="prijzen"
          >
            Prijzen & Pakketten
          </button>
          <button
            class="faq-category-btn px-6 py-3 rounded-xl font-semibold transition-all duration-300"
            data-category="platform"
          >
            Platform & Features
          </button>
          <button
            class="faq-category-btn px-6 py-3 rounded-xl font-semibold transition-all duration-300"
            data-category="support"
          >
            Support & Onboarding
          </button>
        </div>
      </div>

      <!-- FAQ Items -->
      <div class="space-y-4" data-faq-items>
        <!-- Algemeen Category -->
        <div class="faq-category-content" data-category-content="algemeen">
          <div
            class="faq-item bg-white rounded-2xl shadow-lg overflow-hidden"
            data-faq-item
          >
            <button
              class="faq-question w-full px-8 py-6 text-left flex items-center justify-between hover:bg-purple-50 transition-colors duration-300"
              data-faq-toggle
            >
              <span class="text-lg font-semibold text-purple-900"
                >Wat is Nutzy precies en hoe werkt het?</span
              >
              <svg
                class="faq-icon w-6 h-6 text-purple-600 transition-transform duration-300"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M19 9l-7 7-7-7"></path>
              </svg>
            </button>
            <div class="faq-answer hidden px-8 pb-6">
              <p class="text-gray-700 leading-relaxed">
                Nutzy is een innovatief recruitment platform dat zich
                specialiseert in het bereiken van Gen-Z talent. We transformeren
                traditionele vacatureteksten naar visuele, interactieve content
                die deze generatie aanspreekt. Door middel van video's,
                infographics en authentieke bedrijfsverhalen brengen we
                werkgevers en jonge talenten op een moderne manier bij elkaar.
              </p>
            </div>
          </div>

          <div
            class="faq-item bg-white rounded-2xl shadow-lg overflow-hidden"
            data-faq-item
          >
            <button
              class="faq-question w-full px-8 py-6 text-left flex items-center justify-between hover:bg-purple-50 transition-colors duration-300"
              data-faq-toggle
            >
              <span class="text-lg font-semibold text-purple-900"
                >Voor welke bedrijven is Nutzy geschikt?</span
              >
              <svg
                class="faq-icon w-6 h-6 text-purple-600 transition-transform duration-300"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M19 9l-7 7-7-7"></path>
              </svg>
            </button>
            <div class="faq-answer hidden px-8 pb-6">
              <p class="text-gray-700 leading-relaxed">
                Nutzy is geschikt voor alle bedrijven die Gen-Z talent willen
                aantrekken, van startups tot grote corporates. We werken met
                bedrijven in verschillende sectoren zoals techniek, finance, IT,
                retail en entertainment. Of je nu 5 of 5000 medewerkers hebt, we
                hebben een pakket dat bij jouw behoeften past.
              </p>
            </div>
          </div>

          <div
            class="faq-item bg-white rounded-2xl shadow-lg overflow-hidden"
            data-faq-item
          >
            <button
              class="faq-question w-full px-8 py-6 text-left flex items-center justify-between hover:bg-purple-50 transition-colors duration-300"
              data-faq-toggle
            >
              <span class="text-lg font-semibold text-purple-900"
                >Wat maakt Nutzy anders dan traditionele recruitment platforms?</span
              >
              <svg
                class="faq-icon w-6 h-6 text-purple-600 transition-transform duration-300"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M19 9l-7 7-7-7"></path>
              </svg>
            </button>
            <div class="faq-answer hidden px-8 pb-6">
              <p class="text-gray-700 leading-relaxed">
                Wij focussen specifiek op Gen-Z met visuele content,
                interactieve elementen en authentieke verhalen. Waar
                traditionele platforms nog steeds werken met lange teksten en
                formulieren, bieden wij video content, creator partnerships en
                een moderne gebruikerservaring die Gen-Z écht aanspreekt.
              </p>
            </div>
          </div>
        </div>

        <!-- Prijzen Category -->
        <div
          class="faq-category-content hidden"
          data-category-content="prijzen"
        >
          <div
            class="faq-item bg-white rounded-2xl shadow-lg overflow-hidden"
            data-faq-item
          >
            <button
              class="faq-question w-full px-8 py-6 text-left flex items-center justify-between hover:bg-purple-50 transition-colors duration-300"
              data-faq-toggle
            >
              <span class="text-lg font-semibold text-purple-900"
                >Kan ik altijd opzeggen?</span
              >
              <svg
                class="faq-icon w-6 h-6 text-purple-600 transition-transform duration-300"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M19 9l-7 7-7-7"></path>
              </svg>
            </button>
            <div class="faq-answer hidden px-8 pb-6">
              <p class="text-gray-700 leading-relaxed">
                Ja, alle onze pakketten zijn maandelijks opzegbaar zonder
                verborgen kosten of boetes. We geloven in de kwaliteit van onze
                service en willen dat je bij ons blijft omdat je tevreden bent,
                niet omdat je vast zit aan een contract.
              </p>
            </div>
          </div>

          <div
            class="faq-item bg-white rounded-2xl shadow-lg overflow-hidden"
            data-faq-item
          >
            <button
              class="faq-question w-full px-8 py-6 text-left flex items-center justify-between hover:bg-purple-50 transition-colors duration-300"
              data-faq-toggle
            >
              <span class="text-lg font-semibold text-purple-900"
                >Krijg ik een proefperiode?</span
              >
              <svg
                class="faq-icon w-6 h-6 text-purple-600 transition-transform duration-300"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M19 9l-7 7-7-7"></path>
              </svg>
            </button>
            <div class="faq-answer hidden px-8 pb-6">
              <p class="text-gray-700 leading-relaxed">
                Absoluut! We bieden een 14-dagen gratis proefperiode voor alle
                nieuwe klanten. Tijdens deze periode krijg je volledige toegang
                tot alle features van jouw gekozen pakket, zodat je kunt ervaren
                hoe Nutzy jouw recruitment kan verbeteren.
              </p>
            </div>
          </div>

          <div
            class="faq-item bg-white rounded-2xl shadow-lg overflow-hidden"
            data-faq-item
          >
            <button
              class="faq-question w-full px-8 py-6 text-left flex items-center justify-between hover:bg-purple-50 transition-colors duration-300"
              data-faq-toggle
            >
              <span class="text-lg font-semibold text-purple-900"
                >Kan ik upgraden tijdens mijn contract?</span
              >
              <svg
                class="faq-icon w-6 h-6 text-purple-600 transition-transform duration-300"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M19 9l-7 7-7-7"></path>
              </svg>
            </button>
            <div class="faq-answer hidden px-8 pb-6">
              <p class="text-gray-700 leading-relaxed">
                Ja, je kunt altijd upgraden naar een hoger pakket. De upgrade
                gaat direct in en je betaalt alleen het verschil voor de
                resterende periode van de maand. Downgraden kan ook, maar gaat
                in vanaf de volgende facturatieperiode.
              </p>
            </div>
          </div>
        </div>

        <!-- Platform Category -->
        <div
          class="faq-category-content hidden"
          data-category-content="platform"
        >
          <div
            class="faq-item bg-white rounded-2xl shadow-lg overflow-hidden"
            data-faq-item
          >
            <button
              class="faq-question w-full px-8 py-6 text-left flex items-center justify-between hover:bg-purple-50 transition-colors duration-300"
              data-faq-toggle
            >
              <span class="text-lg font-semibold text-purple-900"
                >Hoe lang duurt het om content te creëren?</span
              >
              <svg
                class="faq-icon w-6 h-6 text-purple-600 transition-transform duration-300"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M19 9l-7 7-7-7"></path>
              </svg>
            </button>
            <div class="faq-answer hidden px-8 pb-6">
              <p class="text-gray-700 leading-relaxed">
                Voor een standaard visuele vacature hebben we 3-5 werkdagen
                nodig. Video content kan 1-2 weken duren, afhankelijk van de
                complexiteit. Voor spoedeisende vacatures bieden we een express
                service aan (binnen 24-48 uur) tegen een kleine meerprijs.
              </p>
            </div>
          </div>

          <div
            class="faq-item bg-white rounded-2xl shadow-lg overflow-hidden"
            data-faq-item
          >
            <button
              class="faq-question w-full px-8 py-6 text-left flex items-center justify-between hover:bg-purple-50 transition-colors duration-300"
              data-faq-toggle
            >
              <span class="text-lg font-semibold text-purple-900"
                >Kan ik de content zelf aanpassen?</span
              >
              <svg
                class="faq-icon w-6 h-6 text-purple-600 transition-transform duration-300"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M19 9l-7 7-7-7"></path>
              </svg>
            </button>
            <div class="faq-answer hidden px-8 pb-6">
              <p class="text-gray-700 leading-relaxed">
                Ja, je krijgt toegang tot onze content editor waar je teksten
                kunt aanpassen, afbeeldingen kunt vervangen en lay-outs kunt
                wijzigen. Voor meer complexe aanpassingen staat ons team altijd
                klaar om te helpen. We bieden ook templates die je zelf kunt
                gebruiken.
              </p>
            </div>
          </div>

          <div
            class="faq-item bg-white rounded-2xl shadow-lg overflow-hidden"
            data-faq-item
          >
            <button
              class="faq-question w-full px-8 py-6 text-left flex items-center justify-between hover:bg-purple-50 transition-colors duration-300"
              data-faq-toggle
            >
              <span class="text-lg font-semibold text-purple-900"
                >Welke analytics krijg ik?</span
              >
              <svg
                class="faq-icon w-6 h-6 text-purple-600 transition-transform duration-300"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M19 9l-7 7-7-7"></path>
              </svg>
            </button>
            <div class="faq-answer hidden px-8 pb-6">
              <p class="text-gray-700 leading-relaxed">
                Je krijgt inzicht in views, clicks, applicaties, conversion
                rates, demografische data van kandidaten, en engagement metrics.
                Professional en Enterprise klanten krijgen ook geavanceerde
                analytics zoals candidate journey tracking, A/B test resultaten
                en ROI berekeningen.
              </p>
            </div>
          </div>
        </div>

        <!-- Support Category -->
        <div
          class="faq-category-content hidden"
          data-category-content="support"
        >
          <div
            class="faq-item bg-white rounded-2xl shadow-lg overflow-hidden"
            data-faq-item
          >
            <button
              class="faq-question w-full px-8 py-6 text-left flex items-center justify-between hover:bg-purple-50 transition-colors duration-300"
              data-faq-toggle
            >
              <span class="text-lg font-semibold text-purple-900"
                >Hoe werkt de onboarding?</span
              >
              <svg
                class="faq-icon w-6 h-6 text-purple-600 transition-transform duration-300"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M19 9l-7 7-7-7"></path>
              </svg>
            </button>
            <div class="faq-answer hidden px-8 pb-6">
              <p class="text-gray-700 leading-relaxed">
                Na aanmelding plannen we binnen 24 uur een kickoff call om jouw
                behoeften te bespreken. Vervolgens krijg je toegang tot het
                platform, een persoonlijke training en help bij het opstellen
                van je eerste visuele vacature. De volledige onboarding duurt
                meestal 1-2 weken.
              </p>
            </div>
          </div>

          <div
            class="faq-item bg-white rounded-2xl shadow-lg overflow-hidden"
            data-faq-item
          >
            <button
              class="faq-question w-full px-8 py-6 text-left flex items-center justify-between hover:bg-purple-50 transition-colors duration-300"
              data-faq-toggle
            >
              <span class="text-lg font-semibold text-purple-900"
                >Welke support krijg ik?</span
              >
              <svg
                class="faq-icon w-6 h-6 text-purple-600 transition-transform duration-300"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M19 9l-7 7-7-7"></path>
              </svg>
            </button>
            <div class="faq-answer hidden px-8 pb-6">
              <p class="text-gray-700 leading-relaxed">
                Starter klanten krijgen email support (reactie binnen 24 uur).
                Professional klanten krijgen priority support met chat en
                telefoon (reactie binnen 4 uur). Enterprise klanten hebben een
                dedicated account manager en 24/7 support beschikbaar.
              </p>
            </div>
          </div>

          <div
            class="faq-item bg-white rounded-2xl shadow-lg overflow-hidden"
            data-faq-item
          >
            <button
              class="faq-question w-full px-8 py-6 text-left flex items-center justify-between hover:bg-purple-50 transition-colors duration-300"
              data-faq-toggle
            >
              <span class="text-lg font-semibold text-purple-900"
                >Bieden jullie training aan?</span
              >
              <svg
                class="faq-icon w-6 h-6 text-purple-600 transition-transform duration-300"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M19 9l-7 7-7-7"></path>
              </svg>
            </button>
            <div class="faq-answer hidden px-8 pb-6">
              <p class="text-gray-700 leading-relaxed">
                Ja! Alle klanten krijgen een persoonlijke onboarding training.
                Daarnaast bieden we webinars, video tutorials en een uitgebreide
                knowledge base. Professional en Enterprise klanten krijgen ook
                toegang tot exclusieve masterclasses over Gen-Z recruitment
                trends.
              </p>
            </div>
          </div>
        </div>
      </div>

      <!-- Contact CTA -->
      <div
        class="text-center mt-16 bg-gradient-to-r from-purple-600 via-pink-600 to-purple-800 rounded-2xl p-8 text-white"
        data-faq-cta
      >
        <h3 class="text-2xl font-bold mb-4">Staat jouw vraag er niet bij?</h3>
        <p class="text-lg mb-6 opacity-90">
          Neem contact met ons op en we beantwoorden al jouw vragen persoonlijk.
        </p>
        <a
          href="/#contact"
          class="group relative overflow-hidden rounded-xl bg-white text-purple-600 px-8 py-4 font-semibold shadow-lg transition-all duration-300 hover:scale-105 hover:shadow-xl focus:outline-none focus:ring-4 focus:ring-white/50"
        >
          <span class="relative z-10 flex items-center justify-center gap-2">
            Stel je vraag
            <svg
              class="h-5 w-5 transition-transform duration-300 group-hover:translate-x-1"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
            </svg>
          </span>
        </a>
      </div>
    </div>
  </div>
</section>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";
  import { SplitText } from "gsap/SplitText";

  gsap.registerPlugin(SplitText, ScrollTrigger);

  class FAQController {
    private faqSection: HTMLElement;
    private categoryButtons: NodeListOf<HTMLButtonElement>;
    private categoryContents: NodeListOf<HTMLElement>;
    private faqItems: NodeListOf<HTMLElement>;

    constructor() {
      this.faqSection = document.querySelector(
        "[data-faq-section]"
      ) as HTMLElement;
      this.categoryButtons = document.querySelectorAll(".faq-category-btn");
      this.categoryContents = document.querySelectorAll(
        "[data-category-content]"
      );
      this.faqItems = document.querySelectorAll("[data-faq-item]");

      if (this.faqSection) {
        this.init();
      }
    }

    private init(): void {
      this.initCategoryToggle();
      this.initFAQToggles();
      this.initAnimations();
    }

    private initCategoryToggle(): void {
      this.categoryButtons.forEach((button) => {
        button.addEventListener("click", () => {
          const category = button.getAttribute("data-category");
          this.showCategory(category);
          this.setActiveButton(button);
        });
      });
    }

    private showCategory(category: string | null): void {
      this.categoryContents.forEach((content) => {
        const contentCategory = content.getAttribute("data-category-content");
        if (contentCategory === category) {
          content.classList.remove("hidden");
          // Animate in
          gsap.fromTo(
            content,
            { opacity: 0, y: 20 },
            { opacity: 1, y: 0, duration: 0.3, ease: "power2.out" }
          );
        } else {
          content.classList.add("hidden");
        }
      });
    }

    private setActiveButton(activeButton: HTMLButtonElement): void {
      this.categoryButtons.forEach((button) => {
        button.classList.remove("active", "bg-purple-600", "text-white");
        button.classList.add("text-purple-600", "hover:bg-purple-50");
      });

      activeButton.classList.add("active", "bg-purple-600", "text-white");
      activeButton.classList.remove("text-purple-600", "hover:bg-purple-50");
    }

    private initFAQToggles(): void {
      this.faqItems.forEach((item) => {
        const toggle = item.querySelector(
          "[data-faq-toggle]"
        ) as HTMLButtonElement;
        const answer = item.querySelector(".faq-answer") as HTMLElement;
        const icon = item.querySelector(".faq-icon") as SVGElement;

        if (toggle && answer && icon) {
          toggle.addEventListener("click", () => {
            const isOpen = !answer.classList.contains("hidden");

            if (isOpen) {
              // Close
              gsap.to(answer, {
                height: 0,
                opacity: 0,
                duration: 0.3,
                ease: "power2.inOut",
                onComplete: () => {
                  answer.classList.add("hidden");
                  answer.style.height = "";
                },
              });
              gsap.to(icon, {
                rotation: 0,
                duration: 0.3,
                ease: "power2.inOut",
              });
            } else {
              // Open
              answer.classList.remove("hidden");
              const height = answer.scrollHeight;
              gsap.fromTo(
                answer,
                { height: 0, opacity: 0 },
                {
                  height: height,
                  opacity: 1,
                  duration: 0.3,
                  ease: "power2.inOut",
                  onComplete: () => {
                    answer.style.height = "auto";
                  },
                }
              );
              gsap.to(icon, {
                rotation: 180,
                duration: 0.3,
                ease: "power2.inOut",
              });
            }
          });
        }
      });
    }

    private initAnimations(): void {
      const prefersReducedMotion = window.matchMedia(
        "(prefers-reduced-motion: reduce)"
      ).matches;
      if (prefersReducedMotion) return;

      // Animate section title
      const faqTitle = this.faqSection.querySelector(".split-faq");
      if (faqTitle) {
        const split = SplitText.create(faqTitle, { type: "words, chars" });
        gsap.fromTo(
          split.chars,
          { opacity: 0, y: 100 },
          {
            opacity: 1,
            y: 0,
            duration: 1,
            stagger: 0.05,
            scrollTrigger: {
              trigger: faqTitle,
              start: "top 80%",
              end: "bottom 20%",
              toggleActions: "play none none reverse",
            },
          }
        );
      }

      // Animate FAQ items
      this.faqItems.forEach((item, index) => {
        gsap.fromTo(
          item,
          { opacity: 0, y: 30 },
          {
            opacity: 1,
            y: 0,
            duration: 0.6,
            ease: "power2.out",
            delay: index * 0.1,
            scrollTrigger: {
              trigger: item,
              start: "top 85%",
              end: "bottom 15%",
              toggleActions: "play none none reverse",
            },
          }
        );
      });
    }
  }

  // Initialize when DOM is ready
  document.addEventListener("DOMContentLoaded", () => {
    new FAQController();
  });
</script>

<style>
  .faq-category-btn.active {
    background-color: var(--color-purple-600);
    color: white;
  }

  .faq-category-btn:not(.active) {
    color: var(--color-purple-600);
    background-color: white;
  }

  .faq-category-btn:not(.active):hover {
    background-color: var(--color-purple-50);
  }
</style>
